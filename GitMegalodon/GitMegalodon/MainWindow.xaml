<Window x:Class="GitMegalodon.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:GitMegalodon"
        mc:Ignorable="d"
        Title="GitMegalodon" Height="800" Width="1200">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        
        <!-- Left Panel - Repository List and Actions -->
        <DockPanel Grid.Column="0" Background="#2D2D30">
            <TextBlock DockPanel.Dock="Top" Text="GitMegalodon" Foreground="White" 
                       FontSize="20" Padding="10" HorizontalAlignment="Center"/>
            <Button DockPanel.Dock="Top" Content="Open Repository" Margin="10,5" Padding="5" Click="OpenRepository_Click"/>
            <Button DockPanel.Dock="Top" Content="Clone Repository" Margin="10,5" Padding="5" Click="CloneRepository_Click"/>
            <Button DockPanel.Dock="Top" Content="Create Repository" Margin="10,5" Padding="5" Click="CreateRepository_Click"/>
            
            <TextBlock DockPanel.Dock="Top" Text="Recent Repositories" Foreground="White" 
                       Padding="10" Margin="0,10,0,0"/>
            <ListBox x:Name="RecentReposList" Background="Transparent" Foreground="White" BorderThickness="0"
                     ItemsSource="{Binding RecentRepositories}" SelectionChanged="RecentReposList_SelectionChanged">
            </ListBox>
        </DockPanel>
        
        <!-- Right Panel - Repository Details -->
        <TabControl Grid.Column="1" Background="#1E1E1E">
            <TabItem Header="History">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Branch & Action Toolbar -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Background="#333337">
                        <ComboBox x:Name="BranchComboBox" Width="150" Margin="10,5" SelectionChanged="BranchComboBox_SelectionChanged">
                        </ComboBox>
                        <Button Content="Pull" Margin="5,0" Click="Pull_Click"/>
                        <Button Content="Push" Margin="5,0" Click="Push_Click"/>
                        <Button Content="Fetch" Margin="5,0" Click="Fetch_Click"/>
                    </StackPanel>
                    
                    <!-- Commit Graph Area -->
                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="300"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- Commit Graph with overlay canvas -->
                        <Grid Grid.Column="0">
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                                <Grid>
                                    <Canvas x:Name="CommitGraphCanvas" Background="#1E1E1E" MinHeight="500" MinWidth="800" />
                                    <ListView x:Name="CommitsList" Background="Transparent" Opacity="0.7" SelectionChanged="CommitsList_SelectionChanged">
                                        <ListView.View>
                                            <GridView>
                                                <GridViewColumn Header="Hash" Width="80" DisplayMemberBinding="{Binding ShortHash}"/>
                                                <GridViewColumn Header="Message" Width="300" DisplayMemberBinding="{Binding Message}"/>
                                                <GridViewColumn Header="Author" Width="150" DisplayMemberBinding="{Binding Author}"/>
                                                <GridViewColumn Header="Date" Width="150" DisplayMemberBinding="{Binding Date, StringFormat='{}{0:yyyy-MM-dd HH:mm}'}"/>
                                            </GridView>
                                        </ListView.View>
                                    </ListView>
                                </Grid>
                            </ScrollViewer>
                        </Grid>
                        
                        <!-- Commit Details -->
                        <DockPanel Grid.Column="1" Background="#252526">
                            <TextBlock DockPanel.Dock="Top" Text="Commit Details" Foreground="White" 
                                      FontSize="16" Padding="10" Background="#333337"/>
                            <StackPanel x:Name="CommitDetailsPanel" Margin="10">
                                <TextBlock x:Name="CommitTitle" Text="Select a commit to see details" Foreground="White" Margin="0,5" TextWrapping="Wrap"/>
                                <TextBlock x:Name="CommitAuthor" Text="" Foreground="White" Margin="0,5"/>
                                <TextBlock x:Name="CommitDate" Text="" Foreground="White" Margin="0,5"/>
                                <TextBlock Text="Files Changed:" Foreground="White" Margin="0,15,0,5"/>
                                <ListView x:Name="CommitFilesList" Height="200" Background="#1E1E1E" BorderThickness="1" BorderBrush="#333337" Foreground="White">
                                </ListView>
                                <TextBlock Text="Commit Message:" Foreground="White" Margin="0,15,0,5"/>
                                <TextBox x:Name="CommitMessageText" Height="100" IsReadOnly="True" Background="#1E1E1E" 
                                        Foreground="White" BorderThickness="1" BorderBrush="#333337" TextWrapping="Wrap"/>
                            </StackPanel>
                        </DockPanel>
                    </Grid>
                </Grid>
            </TabItem>
            
            <TabItem Header="Changes">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Stage/Unstage Actions -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Background="#333337">
                        <Button Content="Stage All" Margin="5,0" Click="StageAll_Click"/>
                        <Button Content="Unstage All" Margin="5,0" Click="UnstageAll_Click"/>
                        <Button Content="Refresh" Margin="5,0" Click="RefreshChanges_Click"/>
                    </StackPanel>
                    
                    <!-- Changes Area -->
                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- Files List -->
                        <Grid Grid.Column="0" Background="#252526">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            
                            <TextBlock Grid.Row="0" Text="Staged Changes" Foreground="White" 
                                      FontSize="14" Padding="10" Background="#333337"/>
                            <ListView x:Name="StagedChangesList" Grid.Row="1" Background="Transparent" Foreground="White" 
                                     BorderThickness="0" SelectionChanged="StagedChangesList_SelectionChanged">
                            </ListView>
                            
                            <TextBlock Grid.Row="2" Text="Unstaged Changes" Foreground="White" 
                                      FontSize="14" Padding="10" Background="#333337"/>
                            <ListView x:Name="UnstagedChangesList" Grid.Row="3" Background="Transparent" Foreground="White" 
                                     BorderThickness="0" SelectionChanged="UnstagedChangesList_SelectionChanged">
                            </ListView>
                        </Grid>
                        
                        <!-- Diff View -->
                        <DockPanel Grid.Column="1" Background="#1E1E1E">
                            <TextBlock DockPanel.Dock="Top" Text="Diff View" Foreground="White" 
                                      FontSize="14" Padding="10" Background="#333337"/>
                            <TextBox x:Name="DiffView" IsReadOnly="True" Background="#1E1E1E" Foreground="White" 
                                    BorderThickness="0" FontFamily="Consolas" Padding="10" TextWrapping="Wrap"/>
                        </DockPanel>
                    </Grid>
                    
                    <!-- Commit Actions -->
                    <DockPanel Grid.Row="2" Background="#252526">
                        <Button DockPanel.Dock="Right" Content="Commit" Padding="10,5" Margin="10" Click="Commit_Click"/>
                        <TextBox x:Name="CommitMessageInput" DockPanel.Dock="Top" Height="80" Margin="10,10,10,5" 
                                Text="Enter commit message..." TextWrapping="Wrap"/>
                        <TextBox x:Name="AuthorTextBox" Text="Author: User &lt;user@example.com&gt;" Height="25" Margin="10,0,10,10"/>
                    </DockPanel>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>